IPv6地址段:
IPv6地址分为3类地址:
1. 单播地址(Unicast): 用于一对一的连接
2. 多播地址(Multicast): 用于一对多的连接, 也叫组播, IPv6没有广播.
3. 任意播地址(Anycast): 用于多个设备共享一个地址, 路由器转发给最近的一个设备.

1. 单播地址的地址段:
a. 可聚合全球单播地址(Aggregate global unicast address)
   IANA分配的可在全球路由的地址, 即公网地址. 地址范围:
   2xxx:xxxxxx/3-3FFF::FFFF
   目前以分配的: 2000::/3.
   2001::/16: 目前在使用的IPv6的Internet地址.
   2002::/16: 6-to-4的过渡机制的节点保留
   3ffe::/16: 用于6bone测试目的的前缀.
b. 本地链路地址(Link-local address)
   当一个网口(节点)启用IPv6以后, 当网口Link Up的时候, Linux内核会自动的为这个网口配置一个本地链路地址, 其格式如下:
   fe80::/64
   这个IPv6的地址只能在本地的网络使用, 路由器不会转发包含这类地址的数据包, 每个接口只有唯一的一个本地链路地址, 这个地址不会重复(全球唯一), 这个地址用于路由, 表示下一跳的地址.
   本地链路地址的编码格式: EUI-64格式.
   在IPV6中, 无状态自动配置机制使用EUI-64格式来自动配置本地链路地址. 所谓无状态自动配置是指在网络中没有DHCP服务器的情况下, 允许节点自行配置IPV6地址的机制. 
   EUI-64的构造规则: 根据接口的MAC地址再加上固定的前缀来生成一个IPV6的地址.
  工作原理: 自动将48bit的以太网MAC地址扩展成64bit，再挂在一个64bit的前缀后面，组成一个IPV6地址.
  1. 将48位的MAC地址从中间分开，插入一个固定数值fffe
     0050:3EE4:4C00-->0050:3EFF:FEE4:4C00
  2. 将第7个比特位反转, 如果原来是0, 就变为1, 如果原来是1, 就变为0
     0050:3EFF:FEE4:4C00-->0250:3EFF:FEE4:4C00
  3. 加上前缀fe80, 这就是一个完整的IPv6地址
     0250:3EFF:FEE4:4C00-->FE80::0250:3EFF:FEE4:4C00
  反转的原因：
　  在MAC地址中, 第7比特为1表示本地管理,为0表示全球管理
　　在EUI-64格式中, 第7位为1表示全球惟一,为0表示本地惟一

c. 本地站点地址: Site-local address
  IPv6的私网地址, 就像IPv4的私网保留地址. 其前缀是: fec0::/10, 只能在本地网络使用, 不能在Internet上使用这些地址.
  本地站点地址被设计用于永远不会与全球IPV6因特网进行通信的设备, 比如: 打印机/内部网服务器/网络交换机等.

d. 未指定地址: Unspecified address
  其地址是0::0, 表示地址未指定, 相当与IPv4的IN_ADDR_ANY.

e. 回环地址: Loopback address
  其地址是0::1/128, 和IPv4的127.0.0.1/8一样

f. 内嵌IPv4地址的IPv6地址: IPv4 Compatible Address, IPv4 mapped Adcdress.
  a. 其地址是高96位为0, 其低32位是IPv4的32位地址. 用于在IPV4网络上建立自动隧道, 以传输IPv6数据包, 现在已经不采用了.
  b. 映射IPv4地址为IPv6地址, 其高80位为0, 后16位为1, 最后32位为IPv4的32位. 用于拥有IPv4+IPv6协议栈的节点的

2. 组播地址.
  在IPv6中没有广播, 用组播来替代. 组播地址的前缀: ff00::/8, 格式为:
  1111(固定值) + 1111(固定值) + 4bit(标志位) + 4bit(范围位)
  标志位0000表示是永久保留的组播地址, 分配给各种技术使用.
  标志位0001表示是用户可以使用的临时组播地址.
  范围位定义了组播地址的范围:
  0001		本地借口范围
  0010		本地链路范围
  0011		本地子网范围
  0100		本地管理范围
  0101		本地站点范围(类似IPv4的私网组播)
  1000		组织机构范围
  1110		全球范围(类似IPv4的公网组播)
  一些固定的组播地址:
  ff02::1	all nodes	本链路范围内的所有节点
  ff02::2	all routes	本链路范围内的所有路由器
  ff02::5	all ospf routes 本链路范围内的所有ospf路由器
  ff02::9	all rip routes	本链路范围内的所有rip路由器
  ff02::a	all eigrp routes本链路范围内的所有eigrp路由器
  ff05::2	在一个站点范围内的所有路由器.


3. 任意播地址Anycast address
  应用在one-to-nearest(一到近)模式.
  任意播是多个设备共享一个地址. 分配IPv6单播(unicast)地址给拥有相同功用的一些设备. 发送方发送一个以任意播为目标地址的包, 当路由器接受到这个包以后, 就转发给具有这个地址的离它最近的设备, 单播地址用来分配任意播地址. 对于那些没有配备任意播的的地址就是单播地址; 但是当一个单播地址分配给不止一个接口的时候, 单播地址就成了任意播地址.
例如: Mobile方面的特性, 移动设备漫游到其他区域, 不必接入原始的接入点, 只需要找到最近的即可.

4. 接口自动配置的IPv6地址.
Loopback设备Linkup时候会自动配置回环地址0::1/128.
所有的物理网口会自动配置本地链路地址.

IPv6的地址解析.
IPv6没有ARP和RARP协议. IPv6用ICPMv6的组播来实现APR的功能, 其ICMPv6的type是135(邻居请求),136(邻居公告), IPv6的邻居请求的组播地址为: ff02::1:ff(IPv6地址的后24位).

IPv6将组播地址转换成MAC地址: 33-33-(IPV6组播地址的最后32位)




